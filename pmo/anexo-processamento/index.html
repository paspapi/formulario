<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMO Anexo Processamento - ANC</title>

    <!-- Framework CSS Unificado -->
    <link rel="stylesheet" href="../../framework/core/pmo-framework-full.css">

    <!-- CSS Espec√≠fico -->
    <link rel="stylesheet" href="./processamento.css">
</head>
<body>
    <!-- HEADER PADR√ÉO -->
    <header class="pmo-header">
        <div class="pmo-container">
            <div class="header-content">
                <h1>üè≠ Anexo VI - Processamento</h1>
                <p class="subtitle">Produtos Transformados de Origem Vegetal e/ou Animal - ANC</p>
            </div>

            <!-- Navegador de Fluxo -->
            <div id="flow-navigator"></div>
        </div>
    </header>

    <!-- CONTAINER PRINCIPAL -->
    <div class="pmo-container">
        <form id="form-anexo-processamento" class="pmo-form">

            <!-- SE√á√ÉO 1: DADOS GERAIS -->
            <section class="form-section">
                <h2>üìã 1. Dados Gerais da Unidade de Processamento</h2>
                <div class="section-info">
                    <p><strong>Informa√ß√µes:</strong> Preencha os dados de identifica√ß√£o da unidade de processamento m√≠nimo.</p>
                </div>

                <div class="form-grid">
                    <div class="field-wrapper col-span-3">
                        <label for="razao_social">Raz√£o Social *</label>
                        <input type="text" id="razao_social" name="razao_social" required>
                    </div>

                    <div class="field-wrapper">
                        <label for="cnpj_empresa">CNPJ *</label>
                        <input type="text" id="cnpj_empresa" name="cnpj_empresa" data-mask="cnpj" required>
                    </div>

                    <div class="field-wrapper">
                        <label for="inscricao_estadual">Inscri√ß√£o Estadual</label>
                        <input type="text" id="inscricao_estadual" name="inscricao_estadual">
                    </div>

                    <div class="field-wrapper">
                        <label for="inscricao_municipal">Inscri√ß√£o Municipal</label>
                        <input type="text" id="inscricao_municipal" name="inscricao_municipal">
                    </div>

                    <div class="field-wrapper col-span-2">
                        <label for="endereco_processamento">Endere√ßo Completo *</label>
                        <input type="text" id="endereco_processamento" name="endereco_processamento" required>
                    </div>

                    <div class="field-wrapper">
                        <label for="local_proprio_arrendado">Local Pr√≥prio/Arrendado *</label>
                        <select id="local_proprio_arrendado" name="local_proprio_arrendado" required>
                            <option value="">Selecione...</option>
                            <option value="PROPRIO">Pr√≥prio</option>
                            <option value="ARRENDADO">Arrendado</option>
                            <option value="COMODATO">Comodato</option>
                        </select>
                    </div>

                    <div class="field-wrapper">
                        <label for="numero_funcionarios">N√∫mero de Funcion√°rios *</label>
                        <input type="number" id="numero_funcionarios" name="numero_funcionarios" min="0" required>
                    </div>

                    <div class="field-wrapper">
                        <label for="latitude">Latitude</label>
                        <input type="number" id="latitude" name="latitude" step="0.000001">
                    </div>

                    <div class="field-wrapper">
                        <label for="longitude">Longitude</label>
                        <input type="number" id="longitude" name="longitude" step="0.000001">
                    </div>

                    <div class="field-wrapper">
                        <label for="data_preenchimento">Data de Preenchimento *</label>
                        <input type="date" id="data_preenchimento" name="data_preenchimento" required>
                    </div>
                </div>
            </section>

            <!-- SE√á√ÉO 2: SITUA√á√ÉO LEGAL -->
            <section class="form-section">
                <h2>üìÑ 2. Situa√ß√£o Legal</h2>
                <div class="section-info">
                    <p><strong>Importante:</strong> Marque os documentos que voc√™ possui para regulariza√ß√£o legal do processamento.</p>
                </div>

                <div class="checkbox-list">
                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_ciencia_obrigacoes" value="sim">
                        <span>Tenho ci√™ncia das minhas obriga√ß√µes como neg√≥cio que produz alimenta√ß√£o org√¢nica</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_alvara_funcionamento" value="sim">
                        <span>Possuo Alvar√° de Funcionamento pela Prefeitura</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_processo_vigilancia" value="sim">
                        <span>Dei entrada ao processo de an√°lise sanit√°ria do manejo de alimentos</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_licenca_sanitaria_sp" value="sim">
                        <span>Possuo Licen√ßa Sanit√°ria expedida pela Vigil√¢ncia Sanit√°ria do Estado de SP</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_licenca_sanitaria_outro" value="sim">
                        <span>Possuo Licen√ßa Sanit√°ria de fora do Estado de SP</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_cnae_dispensado" value="sim">
                        <span>Minha atividade econ√¥mica (CNAE) est√° dispensada da licen√ßa sanit√°ria</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_analise_agua" value="sim">
                        <span>Possuo an√°lise da qualidade da √°gua utilizada no processamento atualizada</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="doc_manual_boas_praticas" value="sim">
                        <span>Possuo Manual de Boas Pr√°ticas de Fabrica√ß√£o</span>
                    </label>
                </div>
            </section>

            <!-- SE√á√ÉO 3: PRODUTOS PROCESSADOS -->
            <section class="form-section">
                <h2>ü•´ 3. Produtos Processados</h2>
                <div class="section-info">
                    <p><strong>Produtos:</strong> Liste os produtos que voc√™ processa minimamente (ex: frutas higienizadas, legumes cortados, etc).</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table" id="tabela-produtos">
                        <thead>
                            <tr>
                                <th style="width: 5%">#</th>
                                <th style="width: 35%">Produto</th>
                                <th style="width: 40%">Descri√ß√£o do Processamento</th>
                                <th style="width: 10%">Quantidade Mensal (kg)</th>
                                <th style="width: 10%">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Linhas ser√£o adicionadas via JavaScript -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-add" onclick="AnexoProcessamento.table.addRow('tabela-produtos')">
                        ‚ûï Adicionar Produto
                    </button>
                </div>
            </section>

            <!-- SE√á√ÉO 4: ETAPAS DO PROCESSAMENTO -->
            <section class="form-section">
                <h2>‚öôÔ∏è 4. Etapas do Processamento M√≠nimo</h2>
                <div class="section-info">
                    <p><strong>Etapas:</strong> Descreva cada etapa do seu processo de produ√ß√£o.</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table" id="tabela-etapas">
                        <thead>
                            <tr>
                                <th style="width: 5%">#</th>
                                <th style="width: 20%">Etapa do Processo</th>
                                <th style="width: 35%">Descri√ß√£o da Etapa</th>
                                <th style="width: 20%">Subst√¢ncias Utilizadas</th>
                                <th style="width: 15%">Equipamentos</th>
                                <th style="width: 5%">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Linhas ser√£o adicionadas via JavaScript -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-add" onclick="AnexoProcessamento.table.addRow('tabela-etapas')">
                        ‚ûï Adicionar Etapa
                    </button>
                </div>
            </section>

            <!-- SE√á√ÉO 5: PRODUTOS DE HIGIENIZA√á√ÉO -->
            <section class="form-section">
                <h2>üßº 5. Produtos de Higieniza√ß√£o</h2>
                <div class="section-info">
                    <p><strong>Higieniza√ß√£o:</strong> Liste os produtos utilizados para limpeza e higieniza√ß√£o.</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table" id="tabela-higienizacao">
                        <thead>
                            <tr>
                                <th style="width: 5%">#</th>
                                <th style="width: 20%">Marca/Nome Comercial</th>
                                <th style="width: 20%">Subst√¢ncia Ativa</th>
                                <th style="width: 20%">Fabricante</th>
                                <th style="width: 25%">Quando Usar</th>
                                <th style="width: 5%">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Linhas ser√£o adicionadas via JavaScript -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-add" onclick="AnexoProcessamento.table.addRow('tabela-higienizacao')">
                        ‚ûï Adicionar Produto de Higieniza√ß√£o
                    </button>
                </div>
            </section>

            <!-- SE√á√ÉO 6: CONTROLES E REGISTROS -->
            <section class="form-section">
                <h2>üìä 6. Controles e Registros</h2>
                <div class="section-info">
                    <p><strong>Controles:</strong> Descreva como voc√™ faz o controle de cada atividade.</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table">
                        <thead>
                            <tr>
                                <th style="width: 40%">Atividade</th>
                                <th style="width: 60%">M√©todo de Controle</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ENTRADA DE INGREDIENTES / COMPRAS</td>
                                <td><input type="text" name="controle_entrada_ingredientes" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>CONTROLE DE ESTOQUE DOS INGREDIENTES/MAT√âRIAS PRIMAS</td>
                                <td><input type="text" name="controle_estoque_ingredientes" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>PROCESSAMENTO</td>
                                <td><input type="text" name="controle_processamento" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>CONTROLE DE ESTOQUE DO PRODUTO FINAL PARA VENDA</td>
                                <td><input type="text" name="controle_estoque_final" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>VENDA DE PRODUTOS</td>
                                <td><input type="text" name="controle_venda_produtos" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>COMPRA DE INSUMOS / PRODUTOS HIGIENIZA√á√ÉO</td>
                                <td><input type="text" name="controle_compra_insumos" class="full-width"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- SE√á√ÉO 7: M√ÉO DE OBRA -->
            <section class="form-section">
                <h2>üë• 7. M√£o de Obra</h2>
                <div class="section-info">
                    <p><strong>Funcion√°rios:</strong> Informe a quantidade de funcion√°rios por tipo.</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table">
                        <thead>
                            <tr>
                                <th style="width: 60%">Tipo de Funcion√°rio</th>
                                <th style="width: 40%">Quantidade</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>FAMILIAR</td>
                                <td><input type="number" name="func_familiar" min="0" value="0" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>EMPREGADOS</td>
                                <td><input type="number" name="func_empregados" min="0" value="0" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>DIARISTAS</td>
                                <td><input type="number" name="func_diaristas" min="0" value="0" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>PARCEIROS</td>
                                <td><input type="number" name="func_parceiros" min="0" value="0" class="full-width"></td>
                            </tr>
                            <tr>
                                <td>MEEIRO RURAL</td>
                                <td><input type="number" name="func_meeiro" min="0" value="0" class="full-width"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- SE√á√ÉO 8: ETAPAS FORA DA UNIDADE -->
            <section class="form-section">
                <h2>üè¢ 8. Etapas Realizadas Fora da Unidade</h2>
                <div class="section-info">
                    <p><strong>Terceiriza√ß√£o:</strong> Caso alguma etapa seja realizada fora da sua unidade, preencha abaixo.</p>
                </div>

                <div class="table-wrapper">
                    <table class="dynamic-table" id="tabela-etapas-fora">
                        <thead>
                            <tr>
                                <th style="width: 5%">#</th>
                                <th style="width: 30%">Etapa</th>
                                <th style="width: 45%">Local/Empresa</th>
                                <th style="width: 15%">Alvar√°/Licen√ßa</th>
                                <th style="width: 5%">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Linhas ser√£o adicionadas via JavaScript -->
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-add" onclick="AnexoProcessamento.table.addRow('tabela-etapas-fora')">
                        ‚ûï Adicionar Etapa Externa
                    </button>
                </div>
            </section>

            <!-- SE√á√ÉO 9: DECLARA√á√ïES OBRIGAT√ìRIAS -->
            <section class="form-section">
                <h2>‚úÖ 9. Declara√ß√µes Obrigat√≥rias</h2>
                <div class="section-info">
                    <p><strong>Importante:</strong> Todas as declara√ß√µes abaixo s√£o obrigat√≥rias para processamento org√¢nico.</p>
                </div>

                <div class="checkbox-list">
                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_nao_radiacao" value="sim" required>
                        <span>Declaro que N√ÉO fa√ßo uso de radia√ß√µes ionizantes, emiss√£o de micro ondas e nanotecnologia *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_nao_duplicidade" value="sim" required>
                        <span>Declaro que N√ÉO utilizo o mesmo ingrediente de origem org√¢nica e n√£o org√¢nica *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_nao_transgenico" value="sim" required>
                        <span>Declaro que N√ÉO utilizo organismos geneticamente modificados (transg√™nicos) *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_conhece_legislacao" value="sim" required>
                        <span>Declaro que conhe√ßo a legisla√ß√£o espec√≠fica para cada produto por mim processado *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_rastreabilidade" value="sim" required>
                        <span>Mantenho registros de rastreabilidade de todos os ingredientes e produtos *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_separacao_produtos" value="sim" required>
                        <span>Mantenho separa√ß√£o adequada entre produtos org√¢nicos e n√£o org√¢nicos (se aplic√°vel) *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_autoriza_visitas" value="sim" required>
                        <span>Autorizo visitas de verifica√ß√£o do SPG na unidade de processamento *</span>
                    </label>

                    <label class="checkbox-enhanced">
                        <input type="checkbox" name="decl_veracidade" value="sim" required>
                        <span>Declaro que todas as informa√ß√µes prestadas s√£o verdadeiras *</span>
                    </label>
                </div>
            </section>

            <!-- √ÅREA DE OBSERVA√á√ïES -->
            <section class="form-section">
                <h2>üìù 10. Observa√ß√µes Adicionais</h2>
                <div class="field-wrapper">
                    <label for="observacoes">Observa√ß√µes, Coment√°rios ou Informa√ß√µes Adicionais</label>
                    <textarea id="observacoes" name="observacoes" rows="5"
                        placeholder="Utilize este espa√ßo para incluir qualquer informa√ß√£o adicional relevante sobre o processamento..."></textarea>
                </div>
            </section>

            <!-- BOT√ïES DE A√á√ÉO -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="AnexoProcessamento.salvar()">
                    üíæ Salvar Rascunho
                </button>
                <button type="button" class="btn btn-primary" onclick="AnexoProcessamento.validar()">
                    ‚úì Validar Formul√°rio
                </button>
                <button type="button" class="btn btn-success" onclick="AnexoProcessamento.exportarJSON()">
                    üì• Exportar JSON
                </button>
                <button type="submit" class="btn btn-primary">
                    üìÑ Gerar PDF
                </button>
            </div>

            <!-- STATUS AUTO-SAVE -->
            <div class="auto-save-status">
                <span id="auto-save-status">üíæ Auto-save ativo</span>
            </div>

            <!-- RESULTADOS DE VALIDA√á√ÉO -->
            <div id="validation-results"></div>

        </form>
    </div>

    <!-- FOOTER PADR√ÉO -->
    <footer class="pmo-footer">
        <p>&copy; 2024 ANC - Associa√ß√£o de Agricultura Natural de Campinas e Regi√£o</p>
        <p>Sistema PMO - Plano de Manejo Org√¢nico</p>
    </footer>

    <!-- Framework JS Unificado -->
    <script src="../../framework/core/pmo-framework.js"></script>
    <script src="../../framework/components/pmo-tables.js"></script>
    <script src="../../framework/components/auto-save-navigation.js"></script>
    <script src="../../framework/components/flow-navigator.js"></script>

    <!-- Schema Mapper (mapeamento bidirecional com /jsonSchemas/) -->
    <script src="../shared/schema-mapper.js"></script>

    <!-- Script Espec√≠fico do Formul√°rio -->
    <script src="./processamento.js"></script>
</body>
</html>
