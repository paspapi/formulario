<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Location Modal (Popup)</title>
    <link rel="stylesheet" href="./framework/core/pmo-framework-full.css">
    <style>
        body {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background: #f9fafb;
        }
        .demo-header {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .demo-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .demo-section h2 {
            margin-top: 0;
            color: #1f2937;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 12px;
        }
        .form-group {
            margin-bottom: 16px;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #374151;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
        }
        .coords-result {
            background: #f0f9ff;
            border: 2px solid #bae6fd;
            padding: 16px;
            border-radius: 8px;
            margin-top: 12px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        table th, table td {
            border: 1px solid #e5e7eb;
            padding: 8px;
            text-align: left;
        }
        table th {
            background: #f3f4f6;
            font-weight: 600;
        }
        table input {
            width: 100%;
            padding: 6px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>üó∫Ô∏è Teste - Location Modal (Sistema Popup)</h1>
        <p>Demonstra√ß√£o do modal reutiliz√°vel em diferentes cen√°rios</p>
    </div>

    <!-- CEN√ÅRIO 1: Cadastro Geral PMO (localiza√ß√£o √∫nica) -->
    <div class="demo-section">
        <h2>üìç Cen√°rio 1: Cadastro Geral PMO (Localiza√ß√£o √önica)</h2>
        <p style="color: #6b7280; margin-bottom: 16px;">
            Bot√£o inline discreto ao lado do CEP. Preencha o endere√ßo e clique no üó∫Ô∏è
        </p>

        <div class="form-group">
            <label for="cep">
                CEP
                <button type="button" class="btn-icon-inline" title="Buscar">üîç</button>
                <button type="button" class="btn-icon-inline"
                        onclick="LocationModal.open({latInput: 'latitude', lonInput: 'longitude'})"
                        title="Localiza√ß√£o GPS">
                    üó∫Ô∏è
                </button>
            </label>
            <input type="text" id="cep" value="13010-111" placeholder="00000-000">
        </div>

        <div class="form-group">
            <label for="endereco">Endere√ßo</label>
            <input type="text" id="endereco" value="Av. Francisco Glic√©rio, 935" placeholder="Rua, n√∫mero">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px;">
            <div class="form-group">
                <label for="bairro">Bairro</label>
                <input type="text" id="bairro" value="Centro">
            </div>
            <div class="form-group">
                <label for="municipio">Munic√≠pio</label>
                <input type="text" id="municipio" value="Campinas">
            </div>
            <div class="form-group">
                <label for="uf">UF</label>
                <input type="text" id="uf" value="SP">
            </div>
        </div>

        <div class="coords-result">
            <strong>Coordenadas GPS:</strong>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 8px;">
                <div>
                    <label>Latitude:</label>
                    <input type="text" id="latitude" readonly placeholder="Clique no üó∫Ô∏è">
                </div>
                <div>
                    <label>Longitude:</label>
                    <input type="text" id="longitude" readonly placeholder="Clique no üó∫Ô∏è">
                </div>
            </div>
        </div>
    </div>

    <!-- CEN√ÅRIO 2: Apicultura (m√∫ltiplos api√°rios) -->
    <div class="demo-section">
        <h2>üêù Cen√°rio 2: Apicultura (M√∫ltiplos Api√°rios)</h2>
        <p style="color: #6b7280; margin-bottom: 16px;">
            Bot√£o üìç em cada linha. Cada api√°rio tem seu pr√≥prio endere√ßo e coordenadas.
        </p>

        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Identifica√ß√£o</th>
                    <th>Endere√ßo</th>
                    <th>GPS</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td><input type="text" value="Api√°rio Bosque" readonly></td>
                    <td><input type="text" id="apiario1-end" value="Estrada do Bosque, km 5, Joaquim Eg√≠dio, Campinas"></td>
                    <td style="text-align: center;">
                        <button type="button" class="btn-location-mini"
                                onclick="abrirLocalizacaoTabela(this, 'apiario1-end', 'apiario1-lat', 'apiario1-lon')"
                                title="GPS">
                            üìç
                        </button>
                    </td>
                    <td><input type="text" id="apiario1-lat" readonly></td>
                    <td><input type="text" id="apiario1-lon" readonly></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><input type="text" value="Api√°rio Serra" readonly></td>
                    <td><input type="text" id="apiario2-end" value="S√≠tio Serra Verde, zona rural, Campinas"></td>
                    <td style="text-align: center;">
                        <button type="button" class="btn-location-mini"
                                onclick="abrirLocalizacaoTabela(this, 'apiario2-end', 'apiario2-lat', 'apiario2-lon')"
                                title="GPS">
                            üìç
                        </button>
                    </td>
                    <td><input type="text" id="apiario2-lat" readonly></td>
                    <td><input type="text" id="apiario2-lon" readonly></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><input type="text" value="Api√°rio Ribeir√£o" readonly></td>
                    <td><input type="text" id="apiario3-end" value="Fazenda Ribeir√£o, km 12, Campinas"></td>
                    <td style="text-align: center;">
                        <button type="button" class="btn-location-mini"
                                onclick="abrirLocalizacaoTabela(this, 'apiario3-end', 'apiario3-lat', 'apiario3-lon')"
                                title="GPS">
                            üìç
                        </button>
                    </td>
                    <td><input type="text" id="apiario3-lat" readonly></td>
                    <td><input type="text" id="apiario3-lon" readonly></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Instru√ß√µes -->
    <div class="demo-section">
        <h2>üìã Como Testar</h2>
        <ol style="color: #374151;">
            <li><strong>Cen√°rio 1 (Cadastro Geral):</strong>
                <ul>
                    <li>Clique no bot√£o üó∫Ô∏è ao lado do CEP</li>
                    <li>Modal abre com endere√ßo j√° preenchido</li>
                    <li>Clique em "Abrir Google Maps"</li>
                    <li>Copie coordenadas e cole no modal</li>
                    <li>Confirme e veja os campos latitude/longitude preenchidos</li>
                </ul>
            </li>
            <li><strong>Cen√°rio 2 (Apicultura):</strong>
                <ul>
                    <li>Clique no bot√£o üìç de qualquer linha</li>
                    <li>Modal abre com o endere√ßo DAQUELA linha espec√≠fica</li>
                    <li>Processo igual: abrir Maps, copiar, colar, confirmar</li>
                    <li>Coordenadas preenchem APENAS aquela linha</li>
                    <li>Repita para cada api√°rio individualmente</li>
                </ul>
            </li>
        </ol>

        <div style="background: #fef3c7; border: 2px solid #fbbf24; padding: 16px; border-radius: 8px; margin-top: 16px;">
            <strong style="color: #78350f;">üí° Coordenadas de teste (Campinas/SP):</strong>
            <code style="display: block; margin-top: 8px; padding: 8px; background: white; border-radius: 4px;">
                -22.9068467, -47.0632881
            </code>
        </div>
    </div>

    <!-- Vantagens -->
    <div class="demo-section">
        <h2>‚ú® Vantagens do Sistema</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div style="background: #f0f9ff; padding: 16px; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #0c4a6e;">üéØ Modal √önico</h3>
                <ul style="color: #1e40af; font-size: 14px;">
                    <li>Um componente reutilizado em todo sistema</li>
                    <li>C√≥digo limpo e manuten√≠vel</li>
                    <li>Consist√™ncia de UX</li>
                </ul>
            </div>
            <div style="background: #f0fdf4; padding: 16px; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #065f46;">üöÄ Flex√≠vel</h3>
                <ul style="color: #047857; font-size: 14px;">
                    <li>Funciona com 1 ou N localiza√ß√µes</li>
                    <li>Detecta endere√ßo automaticamente</li>
                    <li>Ou aceita endere√ßo manual</li>
                </ul>
            </div>
            <div style="background: #fef2f2; padding: 16px; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #991b1b;">‚ö° Eficiente</h3>
                <ul style="color: #dc2626; font-size: 14px;">
                    <li>Popup r√°pido, n√£o sai da p√°gina</li>
                    <li>Google Maps abre em nova aba</li>
                    <li>Zero configura√ß√£o necess√°ria</li>
                </ul>
            </div>
            <div style="background: #fdf4ff; padding: 16px; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #701a75;">üé® Discreto</h3>
                <ul style="color: #a21caf; font-size: 14px;">
                    <li>Bot√µes inline pequenos</li>
                    <li>N√£o ocupa espa√ßo visual</li>
                    <li>Design minimalista</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="./framework/core/pmo-framework.js"></script>
    <script src="./framework/components/location-modal.js"></script>

    <script>
        // Helper para tabela
        function abrirLocalizacaoTabela(button, enderecoId, latId, lonId) {
            const enderecoInput = document.getElementById(enderecoId);
            const endereco = enderecoInput ? enderecoInput.value : '';

            LocationModal.open({
                latInput: latId,
                lonInput: lonId,
                address: endereco || null,
                onConfirm: function(coords) {
                    console.log('Coordenadas salvas:', coords);
                }
            });
        }

        console.log('‚úÖ Location Modal pronto para teste!');
    </script>
</body>
</html>
