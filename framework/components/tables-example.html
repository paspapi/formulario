<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMO Table - Exemplo de Uso</title>

    <!-- Framework CSS -->
    <link rel="stylesheet" href="../styles/_variables.css">
    <link rel="stylesheet" href="../styles/_base.css">
    <link rel="stylesheet" href="../styles/_components.css">
    <link rel="stylesheet" href="../styles/_utilities.css">

    <style>
        body {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .example-section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .example-section h2 {
            margin-top: 0;
            color: #10b981;
        }
        .code-block {
            background: #1f2937;
            color: #f3f4f6;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>üìä PMO Table - Exemplos de Uso</h1>
    <p><strong>Componente de tabelas din√¢micas com suporte a clipboard (colar de planilhas)</strong></p>

    <!-- Exemplo 1: Tabela Simples -->
    <div class="example-section">
        <h2>Exemplo 1: Tabela Simples de Produtos</h2>
        <p>Tabela b√°sica com campos de texto e n√∫mero.</p>

        <div id="tableProdutos"></div>

        <div class="code-block">
// C√≥digo JavaScript
const tableProdutos = new PMOTable('tableProdutos', {
    minRows: 1,
    maxRows: 50,
    columns: [
        { field: 'produto', label: 'Produto', type: 'text', required: true },
        { field: 'quantidade', label: 'Quantidade', type: 'number', required: true, min: 0 },
        { field: 'unidade', label: 'Unidade', type: 'select', required: true,
          options: ['kg', 'g', 'L', 'mL', 'unidade'] },
        { field: 'observacoes', label: 'Observa√ß√µes', type: 'text' }
    ],
    allowPaste: true,
    allowExport: true,
    zebra: true
});
        </div>
    </div>

    <!-- Exemplo 2: Tabela com Valida√ß√µes -->
    <div class="example-section">
        <h2>Exemplo 2: Tabela de Fornecedores (com valida√ß√£o de CNPJ)</h2>
        <p>Tabela com valida√ß√µes customizadas.</p>

        <div id="tableFornecedores"></div>

        <div class="code-block">
// C√≥digo JavaScript
const tableFornecedores = new PMOTable('tableFornecedores', {
    minRows: 1,
    maxRows: 20,
    columns: [
        { field: 'razao_social', label: 'Raz√£o Social', type: 'text', required: true },
        { field: 'cnpj', label: 'CNPJ', type: 'text', required: true, mask: 'cnpj',
          placeholder: '00.000.000/0000-00' },
        { field: 'telefone', label: 'Telefone', type: 'tel', mask: 'telefone',
          placeholder: '(00) 00000-0000' },
        { field: 'email', label: 'E-mail', type: 'email' },
        { field: 'status', label: 'Status', type: 'select',
          options: [
              { value: 'ativo', label: 'Ativo' },
              { value: 'inativo', label: 'Inativo' }
          ]
        }
    ],
    validators: {
        cnpj: (value) => {
            const cnpj = value.replace(/\D/g, '');
            if (cnpj.length !== 14) return false;
            // Valida√ß√£o simplificada (voc√™ pode usar a fun√ß√£o completa)
            return true;
        }
    },
    allowPaste: true,
    allowExport: true
});
        </div>
    </div>

    <!-- Exemplo 3: Tabela com Datas -->
    <div class="example-section">
        <h2>Exemplo 3: Tabela de Atividades com Datas</h2>
        <p>Tabela com campos de data e textarea.</p>

        <div id="tableAtividades"></div>

        <div class="code-block">
// C√≥digo JavaScript
const tableAtividades = new PMOTable('tableAtividades', {
    minRows: 2,
    maxRows: 100,
    columns: [
        { field: 'data_inicio', label: 'Data In√≠cio', type: 'date', required: true },
        { field: 'data_fim', label: 'Data Fim', type: 'date', required: true },
        { field: 'atividade', label: 'Atividade', type: 'select', required: true,
          options: ['Preparo do solo', 'Plantio', 'Tratos culturais', 'Colheita',
                    'Aduba√ß√£o', 'Controle de pragas'] },
        { field: 'area_ha', label: '√Årea (ha)', type: 'number', required: true,
          min: 0, step: 0.01 },
        { field: 'descricao', label: 'Descri√ß√£o', type: 'textarea', rows: 2 }
    ],
    allowPaste: true,
    allowExport: true,
    zebra: true,
    onRowAdd: (row, index, data) => {
        console.log('Linha adicionada:', index, data);
    }
});
        </div>
    </div>

    <!-- Instru√ß√µes de uso do Clipboard -->
    <div class="example-section">
        <h2>üéØ Como colar dados de planilhas (Excel, Google Sheets)</h2>

        <h3>M√©todo 1: Bot√£o "Colar planilha"</h3>
        <ol>
            <li>Copie os dados no Excel ou Google Sheets (Ctrl+C)</li>
            <li>Clique no bot√£o "Colar planilha" acima da tabela</li>
            <li>Cole os dados na caixa de texto (Ctrl+V)</li>
            <li>Veja o preview e clique em "Colar dados"</li>
        </ol>

        <h3>M√©todo 2: Atalho direto (Ctrl+V)</h3>
        <ol>
            <li>Copie os dados no Excel ou Google Sheets (Ctrl+C)</li>
            <li>Clique em qualquer campo da tabela</li>
            <li>Pressione Ctrl+V</li>
            <li>Os dados ser√£o colados automaticamente!</li>
        </ol>

        <h3>üìù Formatos suportados</h3>
        <ul>
            <li><strong>TSV (Tab Separated Values)</strong> - Padr√£o do Excel</li>
            <li><strong>CSV (Comma Separated Values)</strong> - V√≠rgula como separador</li>
            <li><strong>CSV Ponto-e-v√≠rgula</strong> - Ponto-e-v√≠rgula (comum no Excel PT-BR)</li>
            <li><strong>Detec√ß√£o autom√°tica</strong> - O sistema detecta o delimitador automaticamente</li>
        </ul>

        <h3>üí° Dicas</h3>
        <ul>
            <li>O n√∫mero de colunas deve corresponder √† estrutura da tabela</li>
            <li>C√©lulas vazias s√£o aceitas</li>
            <li>Campos entre aspas s√£o suportados (ex: "valor com, v√≠rgula")</li>
            <li>Voc√™ pode limpar a tabela antes de colar (sistema perguntar√°)</li>
        </ul>

        <h3>üß™ Teste com dados de exemplo</h3>
        <p>Copie os dados abaixo e cole em qualquer tabela acima:</p>

        <div class="code-block">
Tomate	100	kg	Org√¢nico certificado
Alface	50	kg	Hidrop√¥nico
Cenoura	75	kg	Agroecol√≥gico
Batata	200	kg	Cultivo em terra
        </div>
    </div>

    <!-- API Reference -->
    <div class="example-section">
        <h2>üìö Refer√™ncia da API</h2>

        <h3>Construtor</h3>
        <div class="code-block">
new PMOTable(containerId, config)

Par√¢metros:
- containerId (string): ID do elemento container
- config (object): Objeto de configura√ß√£o

Configura√ß√£o dispon√≠vel:
{
    minRows: 1,              // N√∫mero m√≠nimo de linhas
    maxRows: 999,            // N√∫mero m√°ximo de linhas
    columns: [],             // Array de defini√ß√£o de colunas (obrigat√≥rio)
    allowAdd: true,          // Permitir adicionar linhas
    allowRemove: true,       // Permitir remover linhas
    allowPaste: true,        // Permitir colar do clipboard
    allowExport: true,       // Permitir exportar CSV
    autoSave: true,          // Auto-save em localStorage
    storageKey: 'pmo_table', // Chave do localStorage
    validators: {},          // Validadores customizados
    zebra: true,             // Zebra striping (linhas alternadas)
    onRowAdd: null,          // Callback ao adicionar linha
    onRowRemove: null,       // Callback ao remover linha
    onPaste: null,           // Callback ao colar dados
    onValidate: null         // Callback de valida√ß√£o
}
        </div>

        <h3>Defini√ß√£o de Colunas</h3>
        <div class="code-block">
{
    field: 'nome_campo',     // Nome do campo (obrigat√≥rio)
    label: 'Label',          // Label exibido no cabe√ßalho
    type: 'text',            // Tipo: text, number, email, tel, date, select, textarea, checkbox
    required: false,         // Campo obrigat√≥rio
    disabled: false,         // Campo desabilitado
    placeholder: '',         // Placeholder
    min: null,               // Valor m√≠nimo (number, date)
    max: null,               // Valor m√°ximo (number, date)
    step: null,              // Step (number)
    pattern: '',             // Pattern de valida√ß√£o (regex)
    mask: '',                // M√°scara: cpf, cnpj, cep, telefone
    options: [],             // Op√ß√µes para select/radio
    rows: 3,                 // Linhas (textarea)
    width: '150px',          // Largura da coluna
    help: '',                // Texto de ajuda (tooltip)
    validate: ''             // Nome do validador
}
        </div>

        <h3>M√©todos P√∫blicos</h3>
        <div class="code-block">
// Adicionar linha
table.addRow(data, skipValidation);

// Remover linha
table.removeRow(row);

// Obter dados
const data = table.getData();

// Definir dados
table.setData(data);

// Limpar tabela
table.clearRows();

// Validar tudo
const result = table.validateAll(); // {valid: true/false, errors: [...]}

// Exportar CSV
table.exportToCSV();

// Salvar no localStorage
table.saveData();

// Carregar do localStorage
table.loadSavedData();

// Destruir tabela
table.destroy();
        </div>
    </div>

    <!-- Framework Scripts -->
    <script src="../components/validators.js"></script>
    <script src="../components/tables.js"></script>

    <script>
        // Exemplo 1: Tabela de Produtos
        const tableProdutos = new PMOTable('tableProdutos', {
            minRows: 1,
            maxRows: 50,
            columns: [
                { field: 'produto', label: 'Produto', type: 'text', required: true, placeholder: 'Nome do produto' },
                { field: 'quantidade', label: 'Quantidade', type: 'number', required: true, min: 0, step: 1 },
                { field: 'unidade', label: 'Unidade', type: 'select', required: true,
                  options: ['kg', 'g', 'L', 'mL', 'unidade', 'caixa'] },
                { field: 'observacoes', label: 'Observa√ß√µes', type: 'text', placeholder: 'Informa√ß√µes adicionais' }
            ],
            allowPaste: true,
            allowExport: true,
            zebra: true,
            storageKey: 'pmo_produtos_example'
        });

        // Exemplo 2: Tabela de Fornecedores
        const tableFornecedores = new PMOTable('tableFornecedores', {
            minRows: 1,
            maxRows: 20,
            columns: [
                { field: 'razao_social', label: 'Raz√£o Social', type: 'text', required: true,
                  placeholder: 'Nome da empresa' },
                { field: 'cnpj', label: 'CNPJ', type: 'text', required: true,
                  placeholder: '00.000.000/0000-00', mask: 'cnpj' },
                { field: 'telefone', label: 'Telefone', type: 'tel',
                  placeholder: '(00) 00000-0000', mask: 'telefone' },
                { field: 'email', label: 'E-mail', type: 'email', placeholder: 'email@exemplo.com' },
                { field: 'status', label: 'Status', type: 'select', required: true,
                  options: [
                      { value: 'ativo', label: 'Ativo' },
                      { value: 'inativo', label: 'Inativo' },
                      { value: 'pendente', label: 'Pendente' }
                  ]
                }
            ],
            allowPaste: true,
            allowExport: true,
            zebra: true,
            storageKey: 'pmo_fornecedores_example'
        });

        // Exemplo 3: Tabela de Atividades
        const tableAtividades = new PMOTable('tableAtividades', {
            minRows: 2,
            maxRows: 100,
            columns: [
                { field: 'data_inicio', label: 'Data In√≠cio', type: 'date', required: true },
                { field: 'data_fim', label: 'Data Fim', type: 'date', required: true },
                { field: 'atividade', label: 'Atividade', type: 'select', required: true,
                  options: [
                      'Preparo do solo',
                      'Plantio',
                      'Tratos culturais',
                      'Colheita',
                      'Aduba√ß√£o org√¢nica',
                      'Controle biol√≥gico',
                      'Irriga√ß√£o',
                      'Capina manual'
                  ]
                },
                { field: 'area_ha', label: '√Årea (ha)', type: 'number', required: true,
                  min: 0, step: 0.01, placeholder: '0.00' },
                { field: 'descricao', label: 'Descri√ß√£o', type: 'textarea', rows: 2,
                  placeholder: 'Descreva a atividade realizada' }
            ],
            allowPaste: true,
            allowExport: true,
            zebra: true,
            storageKey: 'pmo_atividades_example',
            onRowAdd: (row, index, data) => {
                console.log('‚úì Linha adicionada:', index, data);
            },
            onPaste: (parsed, addedCount, errorCount) => {
                console.log(`‚úì Dados colados: ${addedCount} linhas, ${errorCount} erros`);
            }
        });

        // Log de eventos para debug
        console.log('‚úì PMOTable examples loaded');
        console.log('Tabelas dispon√≠veis:', {
            tableProdutos,
            tableFornecedores,
            tableAtividades
        });
    </script>
</body>
</html>