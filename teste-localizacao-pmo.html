<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Localiza√ß√£o PMO (com campos de endere√ßo)</title>
    <link rel="stylesheet" href="./framework/core/pmo-framework-full.css">
    <style>
        body {
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            background: #f9fafb;
        }
        .test-header {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .test-header h1 {
            margin: 0 0 8px 0;
        }
        .form-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .form-section h2 {
            margin-top: 0;
            color: #1f2937;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 12px;
            margin-bottom: 20px;
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
        }
        .help-text {
            margin-top: 4px;
            font-size: 13px;
            color: #6b7280;
        }
        .required {
            color: #ef4444;
        }
        .demo-info {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }
        .demo-info h4 {
            margin-top: 0;
            color: #78350f;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>üìç Teste - Localiza√ß√£o com Campos de Endere√ßo do PMO</h1>
        <p>Demonstra√ß√£o de integra√ß√£o autom√°tica com campos existentes</p>
    </div>

    <div class="demo-info">
        <h4>üí° Como testar:</h4>
        <ol style="margin: 8px 0 0 0; padding-left: 20px; color: #92400e;">
            <li>Preencha os campos de endere√ßo abaixo (j√° tem dados de exemplo)</li>
            <li>Clique em "Abrir Google Maps" - o mapa abrir√° com o endere√ßo j√° localizado</li>
            <li>Ajuste para o ponto exato e copie as coordenadas</li>
            <li>Cole no campo de coordenadas e veja a m√°gica acontecer! ‚ú®</li>
        </ol>
    </div>

    <!-- SE√á√ÉO 2: ENDERE√áO (simulando o formul√°rio real do PMO) -->
    <section class="form-section" id="secao-endereco">
        <h2>üìç 2. Endere√ßo da Propriedade</h2>

        <div class="form-group">
            <label for="cep">
                CEP <span class="required">*</span>
            </label>
            <input
                type="text"
                id="cep"
                name="cep"
                placeholder="00000-000"
                value="13010-111"
            >
        </div>

        <div class="form-group">
            <label for="endereco">
                Endere√ßo (Rua, N√∫mero, Complemento) <span class="required">*</span>
            </label>
            <input
                type="text"
                id="endereco"
                name="endereco"
                placeholder="Rua, n√∫mero, complemento"
                value="Av. Francisco Glic√©rio, 935"
            >
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="bairro">
                    Bairro <span class="required">*</span>
                </label>
                <input
                    type="text"
                    id="bairro"
                    name="bairro"
                    placeholder="Nome do bairro"
                    value="Centro"
                >
            </div>

            <div class="form-group">
                <label for="municipio">
                    Munic√≠pio <span class="required">*</span>
                </label>
                <input
                    type="text"
                    id="municipio"
                    name="municipio"
                    placeholder="Nome do munic√≠pio"
                    value="Campinas"
                >
            </div>
        </div>

        <div class="form-group">
            <label for="uf">
                Estado (UF) <span class="required">*</span>
            </label>
            <select id="uf" name="uf">
                <option value="">Selecione...</option>
                <option value="SP" selected>S√£o Paulo</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="MG">Minas Gerais</option>
                <option value="RS">Rio Grande do Sul</option>
                <option value="PR">Paran√°</option>
                <option value="SC">Santa Catarina</option>
            </select>
        </div>
    </section>

    <!-- SE√á√ÉO 3: LOCALIZA√á√ÉO EXATA -->
    <section class="form-section" id="secao-localizacao">
        <h2>üìç 3. Localiza√ß√£o Exata da Propriedade</h2>

        <div class="localizacao-exata">
            <a href="javascript:abrirGoogleMaps()" class="btn-google-maps">
                üó∫Ô∏è Abrir Google Maps com Este Endere√ßo
            </a>

            <div class="instrucoes-coordenadas">
                <strong>üìã Como obter as coordenadas:</strong>
                <ol>
                    <li>Clique no bot√£o acima (o Google Maps abrir√° com seu endere√ßo j√° preenchido)</li>
                    <li>Ajuste o mapa para encontrar o <strong>ponto exato</strong> da sua propriedade</li>
                    <li>Clique com <strong>bot√£o direito</strong> no ponto exato</li>
                    <li>Selecione <strong>"Copiar coordenadas"</strong> no menu</li>
                    <li>Cole as coordenadas no campo abaixo</li>
                </ol>
            </div>

            <div class="input-coordenadas">
                <label for="coordenadas-google-maps">
                    Coordenadas do Google Maps <span class="required">*</span>
                </label>
                <input
                    type="text"
                    id="coordenadas-google-maps"
                    name="coordenadas_google_maps"
                    placeholder="Cole aqui as coordenadas copiadas do Google Maps (ex: -22.9068467, -47.0632881)"
                    autocomplete="off"
                >
                <p class="help-text">
                    Cole as coordenadas exatamente como copiou do Google Maps.
                    Elas ser√£o separadas automaticamente.
                </p>
            </div>

            <div class="campos-coordenadas">
                <div class="latitude">
                    <label for="latitude">
                        Latitude <span class="required">*</span>
                    </label>
                    <input
                        type="text"
                        id="latitude"
                        name="latitude"
                        placeholder="-22.9068467"
                        readonly
                    >
                </div>
                <div class="longitude">
                    <label for="longitude">
                        Longitude <span class="required">*</span>
                    </label>
                    <input
                        type="text"
                        id="longitude"
                        name="longitude"
                        placeholder="-47.0632881"
                        readonly
                    >
                </div>
            </div>

            <div class="confirmacao-localizacao">
                <h4>‚úÖ Localiza√ß√£o Confirmada</h4>
                <p>As coordenadas foram validadas com sucesso!</p>
                <a href="javascript:verificarLocalizacao()" class="btn-verificar-maps">
                    üîç Verificar Localiza√ß√£o no Google Maps
                </a>
            </div>
        </div>
    </section>

    <div style="background: #f0f9ff; border: 2px solid #bae6fd; border-radius: 8px; padding: 20px; margin-top: 20px;">
        <h3 style="margin-top: 0; color: #0c4a6e;">‚úÖ O que foi implementado</h3>
        <ul style="color: #1e40af; margin: 0; padding-left: 20px;">
            <li>‚úÖ <strong>Auto-detec√ß√£o de campos de endere√ßo</strong> - usa os IDs padr√£o do PMO</li>
            <li>‚úÖ <strong>Montagem autom√°tica do endere√ßo</strong> - junta todos os campos</li>
            <li>‚úÖ <strong>Link direto para Google Maps</strong> - abre com endere√ßo j√° localizado</li>
            <li>‚úÖ <strong>Zero configura√ß√£o</strong> - funciona automaticamente</li>
            <li>‚úÖ <strong>Valida√ß√£o autom√°tica</strong> - feedback visual quando v√°lido</li>
            <li>‚úÖ <strong>Campos readonly</strong> - usu√°rio n√£o edita lat/lng manualmente</li>
            <li>‚úÖ <strong>Verifica√ß√£o posterior</strong> - bot√£o para conferir no mapa</li>
        </ul>

        <div style="margin-top: 16px; padding: 12px; background: white; border-radius: 6px;">
            <strong style="color: #78350f;">üí° Teste com estas coordenadas de Campinas:</strong>
            <code style="display: block; margin-top: 8px; padding: 8px; background: #fef3c7; border-radius: 4px;">
                -22.9068467, -47.0632881
            </code>
        </div>
    </div>

    <script src="./framework/core/pmo-framework.js"></script>
    <script src="./framework/components/location-picker.js"></script>
    <script>
        // O componente auto-inicializa e detecta os campos padr√£o do PMO
        // N√£o precisa de configura√ß√£o adicional!

        console.log('‚úÖ LocationPicker pronto para uso');
        console.log('Campos detectados:', LocationPicker.config.addressFields);

        // Exemplo de uso da API
        setTimeout(() => {
            const endereco = LocationPicker.getFullAddress();
            if (endereco) {
                console.log('üìç Endere√ßo completo montado:', endereco);
            }
        }, 500);
    </script>
</body>
</html>
